
/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/
import React from 'react';
import { XIcon } from './icons';
import { motion, AnimatePresence } from 'framer-motion';

interface ChangelogModalProps {
    isOpen: boolean;
    onClose: () => void;
}

const CHANGELOG_DATA = [
     {
        version: 'v18.0',
        date: '2025-10-29',
        changes: [
            "주요 기능 추가: '스튜디오 생성' 모드를 도입했습니다. 이제 고정된 콘크리트 스튜디오 배경에서 AI가 레퍼런스 스타일을 기반으로 새로운 모델과 착장을 생성합니다.",
            "작업 흐름 변경: 시작 화면에서 '원본 생성'과 '스튜디오 생성' 모드를 선택할 수 있습니다.",
            "AI 모델링 강화: 스튜디오 모드는 사용자의 레퍼런스(의상, 신체 비율)를 분석하여 새로운 AI 모델을 창조하며, 극사실적인 피부 질감과 아날로그 필름 느낌으로 결과물을 완성합니다.",
            "정밀 포즈 제어: 스튜디오 모드에서 생성된 이미지의 포즈를 변경할 때, AI는 모델과 배경 등 모든 요소를 고정한 채 오직 자세만 정밀하게 수정합니다.",
        ],
    },
    {
        version: 'v17.0',
        date: '2025-10-28',
        changes: [
            "AI 이미지 생성 해상도 고정 강화: AI가 생성하는 모든 이미지(모델 컷, 클로즈업 컷 등)의 결과물이 '가로 830px, 세로 1024px'의 정확한 사이즈를 갖도록 내부 명령어를 더욱 강화하여, 결과물의 일관성과 정확도를 높였습니다.",
        ],
    },
    {
        version: 'v16.0',
        date: '2025-10-27',
        changes: [
            "AI 학습 시스템 도입 (선택 기반 학습): 이제 사용자가 초기 이미지 선택 단계에서 고른 이미지(선호)와 고르지 않은 이미지(비선호)를 AI가 학습합니다.",
            "학습 결과 적용: AI는 선호하는 이미지 스타일(포즈, 구도 등)을 기억했다가, 다음 이미지 생성/재생성 시 사용자의 취향에 더 가까운 결과물을 만들도록 개선되었습니다.",
            "진화하는 AI: 이 시스템을 통해 앱을 사용할수록 AI가 사용자의 스타일에 맞춰 진화하여, 더 빠르고 정확한 결과물을 제공합니다.",
        ],
    },
    {
        version: 'v15.0',
        date: '2025-10-26',
        changes: [
            "모델 생성 방식 전면 개편: 이제 AI가 10개의 고화질 이미지(모델 컷 5, 클로즈업 컷 5)를 먼저 제안하고, 사용자가 이 중에서 마음에 드는 이미지를 직접 선택하여 상세페이지를 구성하는 새로운 '선택 기반' 작업 흐름을 도입했습니다.",
            "제품 이미지 보정 기능 개선: '재생성' 버튼 클릭 시 현재 선택된 보정 프리셋(스튜디오, 미화 등)이 일관되게 다시 적용되도록 수정했습니다.",
            "제품 이미지 크기 보존 강화: 이미지 보정 시 AI가 원본 이미지의 크기나 구도를 절대 변경하지 않도록 프롬프트를 다시 한번 강화하여 안정성을 높였습니다.",
        ],
    },
     {
        version: 'v14.0',
        date: '2025-10-25',
        changes: [
            "JPG 다운로드 기능 추가: 전체 페이지를 고품질 JPG 파일로 다운로드하는 기능을 추가했습니다. PNG와 마찬가지로 가로 폭 1200px로 고정됩니다.",
            "AI 핵심 로직 개편 (생성 금지): AI가 임의로 새로운 모델, 배경, 의상을 생성하는 것을 원천 차단했습니다. 이제 모든 작업은 사용자가 업로드한 원본의 '정밀 교체 후 파생' 방식으로만 진행됩니다.",
            "작업 흐름 변경: 1) AI가 사용자의 원본 이미지에서 '신발만' 완벽하게 교체합니다. 2) '자세 변경' 등 모든 추가 이미지는 신발이 교체된 이 첫 결과물을 기반으로만 파생됩니다. 이를 통해 모델과 착장의 일관성을 100% 보장합니다.",
        ],
    },
     {
        version: 'v13.0',
        date: '2025-10-24',
        changes: [
            "PNG 다운로드 안정성 개선: 상세페이지 길이가 길어져도 가로 폭이 1200px로 고정되도록 다운로드 로직을 수정하여 이미지가 깨지는 현상을 해결했습니다.",
            "앱 핵심 철학 명시 및 강화: 앱의 정체성을 'AI 생성'이 아닌, 사용자가 업로드한 원본을 기반으로 '교체 및 수정'하는 것으로 명확히 하고, 모든 관련 AI 로직을 이 원칙에 따라 강화했습니다.",
        ],
    },
     {
        version: 'v12.0',
        date: '2025-10-22',
        changes: [
            "UI 개선: '콘텐츠 수정' 패널의 '히어로 이미지 문구' 섹션을 6개에서 3개의 필드(브랜드 이름, 슬로건, 제품설명&해시태그)로 통합하여 입력 편의성을 개선했습니다.",
            "폰트 크기 조정: 사용자의 피드백을 반영하여 '광고 문구' 및 '상품·제작·사이즈 정보' 섹션의 기본 폰트 크기를 상향 조정하여 가독성을 높였습니다.",
        ],
    },
     {
        version: 'v11.0',
        date: '2025-10-22',
        changes: [
            "치명적 버그 최종 해결 (재발 방지): 이미지 삭제 시 간헐적으로 모든 작업 내용이 사라지는 현상의 근본 원인을 파악하고, 렌더링 로직을 수정하여 문제를 최종적으로 해결했습니다. 이제 어떤 상황에서도 데이터가 유실되지 않습니다.",
        ],
    },
    {
        version: 'v10.0',
        date: '2025-10-21',
        changes: [
            "치명적 버그 해결 (데이터 유실 방지): 이미지 삭제 시 모든 작업 내용이 초기화되는 매우 심각한 버그를 최종적으로 해결했습니다. 삭제 로직을 근본적으로 재설계하여, 어떤 상황에서도 데이터가 유실되지 않도록 최고 수준의 안정성을 확보했습니다. 이제 안심하고 삭제 기능을 사용하실 수 있습니다.",
        ],
    },
    {
        version: 'v9.0',
        date: '2025-10-20',
        changes: [
            "치명적 버그 수정 (삭제 시 데이터 초기화): 이미지 삭제 시 모든 작업 내용이 사라지는 심각한 버그를 완전히 해결했습니다. 이제 어떤 이미지를 삭제해도 해당 이미지만 안전하게 제거되며, 다른 작업 내용은 100% 보존됩니다.",
            "HTML 내보내기 기능 개선: 불안정한 'HTML 복사' 기능을 제거하고, 훨씬 안정적인 'HTML 파일 다운로드' 기능으로 전면 교체했습니다. 이제 이미지 포함 버전과 코드만 있는 버전을 .html 파일로 직접 다운로드하여 작업물을 안전하게 저장할 수 있습니다.",
            "제품 이미지 관리 기능 강화: 제품 이미지 섹션에 마우스를 올리면 '이미지 추가' 버튼이 나타나도록 개선했습니다. 또한, 전체 섹션 또는 개별 이미지에 파일을 드래그 앤 드롭하여 간편하게 이미지를 추가하거나 교체할 수 있습니다.",
            "AI 포즈 변경 정밀도 향상: 모델의 포즈를 변경할 때, AI가 기존 인물의 '자세만 수정'하도록 명령 프로토콜을 한층 더 강화하여 모델의 얼굴과 특징이 일관되게 유지되도록 개선했습니다.",
        ],
    },
    {
        version: 'v8.0',
        date: '2025-10-19',
        changes: [
            "주요 개선: '불변의 원본' 프로토콜을 도입하여, 모든 작업이 사용자가 업로드한 원본 이미지를 기반으로 한 '교체' 및 '변경'으로만 수행되도록 작업 흐름을 전면 개편했습니다.",
            "클로즈업 로직 개편: 클로즈업 컷 생성 규칙을 더욱 명확히 했습니다. 이제 첫 컷은 허리 아래, 두 번째 컷은 다른 구도의 포즈, 세 번째 컷은 더 타이트한 클로즈업으로 생성됩니다.",
            "기능 분리: 모델 컷과 클로즈업 컷의 '초기화(재생성)' 기능이 서로에게 영향을 주지 않도록 완벽하게 분리했습니다.",
            "안정성 향상: AI의 자율적인 '생성'을 원천 차단하고 명확한 '변경' 명령만 수행하도록 하여 결과물의 예측 가능성과 일관성을 극대화했습니다.",
        ],
    },
    {
        version: 'v7.0',
        date: '2025-10-18',
        changes: [
            "주요 개선: 앱의 핵심 철학을 '생성'에서 '정밀한 변경'으로 전환하고, 사용자의 피드백을 통해 스스로 진화하는 '앱 진화 시스템 v2.0'을 도입했습니다.",
            "능동적 학습 시스템: 사용자의 다운로드/복사(성공) 및 삭제/초기화(실패) 행동을 학습하여, 성공 패턴은 더 자주 사용하고 실패 패턴은 회피하도록 AI의 작업 방식을 개선했습니다.",
            "불변의 원본 확립: 사용자가 업로드한 첫 모델 이미지를 '페르소나 원본'으로 지정하고, 모든 작업(신발 교체, 자세 변경)이 이 원본을 기반으로 수행되도록 하여 모델 일관성을 100% 보장합니다.",
        ],
    },
    {
        version: 'v6.0',
        date: '2025-10-17',
        changes: [
            "핵심 철학 변경: 앱의 모든 AI 기능을 '생성'이 아닌 '변경'으로 전환했습니다. 이제 AI는 사용자의 원본 이미지를 기반으로 특정 부분만 정교하게 교체합니다.",
            "얼굴 변경 기능 개선: '얼굴 변경' 시 원본의 포즈, 의상, 배경, 조명을 100% 고정한 채 오직 얼굴과 헤어스타일만 교체하는 '외과적 이식' 방식으로 변경되었습니다.",
            "포즈 변경 기능 추가: '랜덤 포즈' 옵션을 추가하여, 기존 포즈와 겹치지 않는 자연스러운 자세로 '변경'할 수 있도록 개선했습니다.",
        ],
    },
    {
        version: 'v5.0',
        date: '2025-10-16',
        changes: [
            "기능 강화: '이대로 그리기' 기능의 AI 프롬프트를 '외과적 합성 프로토콜 v6.0'으로 업그레이드하여 신발 합성의 정밀도를 크게 향상했습니다.",
            "앱 진화 시스템 도입: 사용자가 결과물을 '다운로드'할 때, 해당 이미지를 생성한 설정(필터, 포즈 등)을 '성공 패턴'으로 기록합니다. 이 데이터는 향후 앱의 AI가 더 좋은 결과물을 만들도록 학습하는 데 사용됩니다.",
        ],
    },
     {
        version: 'v4.0',
        date: '2025-10-15',
        changes: [
            "프로토콜 도입: AI의 자율성을 통제하는 '페르소나 절대 고정 프로토콜 v4.0'을 도입하여 모델과 배경의 일관성을 강화했습니다.",
            "기능 추가: 모델/클로즈업 컷에 이미지를 직접 드래그 앤 드롭하여 교체하는 기능을 추가했습니다.",
            "기능 추가: 각 이미지에 '이대로 그리기' 버튼을 추가하여, 포즈와 배경은 그대로 두고 신발만 정교하게 교체할 수 있도록 했습니다.",
            "기능 추가: 각 이미지에 '복사' 버튼을 추가하여 레이아웃 구성의 편의성을 높였습니다.",
        ],
    },
    {
        version: 'v3.0',
        date: '2025-10-14',
        changes: [
            "주요 개선: 모델의 정체성을 완벽하게 고정하는 '페르소나 절대 고정 프로토콜 v3.0'을 도입하여 안정성을 극대화했습니다.",
            "기능 분리: '모델 컷'과 '클로즈업 컷'의 생성 및 관리 로직을 완전히 분리했습니다. 이제 '얼굴 변경'은 모델 컷에만 적용되며, 클로즈업 컷은 항상 모델의 하반신만 표시합니다.",
            "기능 강화: '얼굴 변경' 시 포즈, 의상, 배경 등 모든 요소를 잠그고 오직 얼굴과 헤어스타일만 정교하게 교체하도록 AI 로직을 강화했습니다.",
            "UI 개선: '모델/클로즈업 컷 추가' 시 AI 생성뿐만 아니라, 사용자가 직접 이미지를 업로드할 수 있는 버튼을 추가하여 편의성을 높였습니다.",
        ],
    },
];

const ChangelogModal: React.FC<ChangelogModalProps> = ({ isOpen, onClose }) => {
    return (
        <AnimatePresence>
            {isOpen && (
                <div 
                    className="fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4"
                    onClick={onClose}
                >
                    <motion.div
                        initial={{ opacity: 0, y: 20, scale: 0.95 }}
                        animate={{ opacity: 1, y: 0, scale: 1 }}
                        exit={{ opacity: 0, y: 20, scale: 0.95 }}
                        transition={{ duration: 0.2, ease: 'easeOut' }}
                        className="bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col"
                        onClick={(e) => e.stopPropagation()}
                    >
                        <div className="flex items-center justify-between p-5 border-b border-gray-200">
                            <h2 className="text-xl font-bold text-gray-800">업데이트 기록</h2>
                            <button onClick={onClose} className="p-1 rounded-full text-gray-500 hover:bg-gray-100">
                                <XIcon className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="p-6 flex-grow overflow-y-auto">
                            <div className="space-y-8">
                                {CHANGELOG_DATA.map((entry, index) => (
                                    <div key={index}>
                                        <div className="flex items-baseline gap-3">
                                            <span className="px-2.5 py-1 bg-gray-800 text-white text-xs font-bold rounded-full">{entry.version}</span>
                                            <p className="text-sm font-medium text-gray-500">{entry.date}</p>
                                        </div>
                                        <ul className="mt-3 ml-1 list-disc list-inside space-y-2 text-gray-700 border-l-2 border-gray-100 pl-5 py-2">
                                            {entry.changes.map((change, cIndex) => (
                                                <li key={cIndex}>{change}</li>
                                            ))}
                                        </ul>
                                    </div>
                                ))}
                            </div>
                        </div>
                         <div className="flex items-center justify-end p-4 border-t border-gray-200 bg-gray-50 rounded-b-lg">
                            <button onClick={onClose} className="px-5 py-2 text-sm font-semibold text-white bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">
                                닫기
                            </button>
                        </div>
                    </motion.div>
                </div>
            )}
        </AnimatePresence>
    );
};

export default ChangelogModal;
